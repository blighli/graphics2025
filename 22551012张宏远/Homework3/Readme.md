# 第三次作业：复杂三维模型显示（OpenGL）

## 一、项目简介

本项目基于 **OpenGL 3.3 Core Profile** 实现了一个简单的三维模型浏览器，支持 **OBJ 格式模型加载**、**多光源光照渲染**，并提供 **多种视点浏览方式**，可对复杂三维模型进行交互式观察与漫游。

项目使用 C++ 开发，结合 GLFW / GLAD / GLM 以及开源模型加载库 tinyobjloader，实现了从模型读取到 GPU 渲染的完整流程。

------

## 二、功能完成情况

### 1. 三维模型格式支持

- ✅ 支持 **OBJ 格式**三维模型
- 使用开源库 **tinyobjloader** 解析 `.obj` 文件
- 自动对模型进行居中与缩放，保证模型可正确显示
- 当模型不包含法线信息时，自动计算平滑法线

> 满足作业要求中“支持以下格式至少一种（OBJ / 3DS / STL）”

------

### 2. 多光源光照效果（Shader 实现）

- 使用 **GLSL 着色器**进行光照计算
- 采用 **Blinn-Phong 光照模型**
- 支持多种光源：
  - 1 个 **方向光（Directional Light）**
  - 多个 **点光源（Point Lights）**（通过数组形式传入 Shader）
- 光照包含：
  - 环境光（Ambient）
  - 漫反射（Diffuse）
  - 高光反射（Specular）

所有光照计算均在 **Fragment Shader** 中完成。

------

### 3. 多种视点浏览方式

程序支持 **两种相机模式**，可在运行时自由切换：

#### （1）以模型为中心的浏览（Orbit 模式）

- **左键拖动**：绕模型旋转（Yaw / Pitch）
- **右键拖动**：平移视点（Pan）
- **鼠标滚轮**：缩放（改变相机与模型距离）

适合观察模型整体结构，类似建模软件的查看方式。

#### （2）以视点为中心的场景漫游（FPS 模式）

- **鼠标移动**：视角旋转
- **W / A / S / D**：前后左右移动
- **Q / E**：上升 / 下降
- **Shift**：加速移动

适合在模型内部或场景中进行第一人称漫游。

#### （3）模式切换

- 按键 `1`：Orbit 模式
- 按键 `2`：FPS 模式

------

## 三、操作说明（快捷键一览）

| 功能              | 操作            |
| ----------------- | --------------- |
| 切换到 Orbit 相机 | `1`             |
| 切换到 FPS 相机   | `2`             |
| Orbit 旋转        | 鼠标左键拖动    |
| Orbit 平移        | 鼠标右键拖动    |
| Orbit 缩放        | 鼠标滚轮        |
| FPS 前后左右      | `W / A / S / D` |
| FPS 上升 / 下降   | `Q / E`         |
| FPS 加速          | `Shift`         |
| 退出程序          | `Esc`           |

------

## 四、项目结构说明

```
opengl/
├─ shaders/
│  ├─ mesh.vert        # 顶点着色器
│  └─ mesh.frag        # 片元着色器（多光源光照）
├─ main.cpp            # 主程序
├─ main.obj            # 测试用 OBJ 模型
└─ README.md
```

- **Shader 文件**采用独立 `.vert / .frag` 文件组织，程序启动时从磁盘加载并编译
- 模型路径可在 `main.cpp` 中修改为任意 OBJ 文件

------

## 五、开发与运行环境

- 操作系统：Windows 10 / 11
- 编译器：Visual Studio（MSVC） / MinGW
- OpenGL 版本：**3.3 Core**
- 显卡：支持 OpenGL 3.3 的独立或集成显卡（测试环境为 NVIDIA RTX 3060 Laptop）

### 使用的第三方库

- **GLFW**：窗口创建与输入处理
- **GLAD**：OpenGL 函数加载
- **GLM**：数学库（矩阵、向量运算）
- **tinyobjloader**：OBJ 模型加载（开源库）

------

## 六、作者信息

- 课程：计算机图形学
- 作业：第三次作业——复杂三维模型显示
- 学生：22551012 张宏远
- 提交时间：2026 年 1 月 6 日
